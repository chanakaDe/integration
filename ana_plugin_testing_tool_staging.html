<html>
  <head>
<body> <h1 style="color:blue;font-size:50px;" > ANA Plugin Testing Tool - Staging</h1> 

</body>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.1.3/materia/bootstrap.min.css">
<link rel="stylesheet" href="https://unpkg.com/formiojs@latest/dist/formio.full.min.css">
    <style>
    #formio{
        padding: 16px;
        margin: 0 auto;
    }
    </style>
    <script src="https://unpkg.com/formiojs@3.20.17/dist/formio.full.min.js"></script>
    <script type="text/javascript">Formio.icons = 'fontawesome';</script>
    <script type="text/javascript">
	
	var letters = "0123456789ABCDEFGHJKMNPQRSTUXY";
	var getBookingNumber = function() {
		var text = "";
		for (var i = 0; i < 6; i++) {
			text += letters.charAt(Math.floor(Math.random() * letters.length));
			}
		return text;
	};
	
	var bookingnumber = getBookingNumber();
	
	function getANADateFormat(date){
		
		var dd = String(date.getDate()).padStart(2, '0');
		var mm = String(date.getMonth() + 1).padStart(2, '0'); //January is 0!
		var yyyy = date.getFullYear();
		
		return (yyyy+mm+dd);
	
	}
	
	var today = new Date();
	var flightdate = new Date();
	
	
	flightdate.setDate(today.getDate() + 14);
	
	today = getANADateFormat(today);
	
	flightdate = getANADateFormat(flightdate); 
	
	console.log(today+' '+flightdate);
	
	var flightnumber = "ANA1".concat(Math.floor(Math.random() * 20)).concat(Math.floor(Math.random() * 20));
	
      window.onload = function() {
       const form = Formio.createForm(document.getElementById('formio'), 
{
    "display": "form",
    "components": [
        {
            "label": "page",
            "placeholder": "settle",
            "defaultValue": "settle",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "page",
			
            "validate": {
                "required": true,
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "widget": {
                "type": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "reorder": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
      
        {
            "label": "booking_paid",
            "placeholder": "1",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "bookingPaid",
            "defaultValue": "1",
            "validate": {
                "required": true,
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "widget": {
                "type": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "reorder": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
        {
            "label": "booking_number",
            "placeholder": bookingnumber,
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "bookingNumber",
			"defaultValue": bookingnumber,
            "validate": {
                "required": true,
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "widget": {
                "type": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "reorder": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
        {
            "label": "booking_payment_method",
            "placeholder": "PI",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "bookingPaymentMethod",
            "defaultValue": "PI",
            "validate": {
                "required": true,
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "label": "booking_date",
            "placeholder": today,
            "inputMask":   "99999999",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "bookingDate",
            "defaultValue": today,
            "validate": {
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "widget": {
                "type": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "reorder": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
  {
            "label": "ana_system_date",
            "placeholder": today,
            "inputMask":   "99999999",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "anasystemDate",
            "defaultValue": today,
            "validate": {
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "widget": {
                "type": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "reorder": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
        {
            "label": "Flights",
            "disableAddingRemovingRows": false,
            "addAnother": "",
            "addAnotherPosition": "bottom",
            "removePlacement": "col",
            "defaultOpen": false,
            "layoutFixed": false,
            "enableRowGroups": false,
            "multiple": true,
            "reorder": true,
            "mask": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "datagrid",
            "input": true,
            "key": "flights",
            "defaultValue": [
                {
                    "bookingPaymentMethod": "PI",
                    "bookingNumber": bookingnumber,
                    "bookingDate": today,
                    "anasystemDate": today,
                    "flightNumber": flightnumber,
                    "departureAirport": "",
                    "departureDate": flightdate+'1400',
                    "arrivalAirport": "",
                    "arrivalDate": flightdate+'1600',
                    "travelers": [
                        {
                            "textField": "",
                            "fareClassCode": "SV28M",
                            "lastName": "Isherwood",
                            "unitPrice": "19000",
                            "firstName": "Donovan",
                            "frequentFlyerNumber": "FF123456789"
                        }
                    ]
                }
            ],
            "validate": {
                "customMessage": "",
                "json": ""
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "components": [
                {
                    "label": " ",
                    "hideLabel": true,
                    "columns": [
                        {
                            "components": [
                                {
                                    "label": "flightNumber",
                                    "placeholder": flightnumber,
									"allowMultipleMasks": false,
									"showWordCount": false,
									"showCharCount": false,
									"tableView": true,
            			    "alwaysEnabled": false,
            			   "type": "textfield",
            			  "input": true,
            			  "key": "flightNumber",
         			   "defaultValue": flightnumber,
            			 "validate": {
                			"required": true,
             			       "customMessage": "",
              				  "json": ""
          			  },
           			 "conditional": {
          			      "show": "",
          			      "when": "",
         			       "json": ""
          			  },
     				       "inputFormat": "plain",
       				     "encrypted": false,
     				       "properties": {},
      				      "customConditional": "",
   				         "logic": [],
    				        "widget": {
       					         "type": ""
       				     },
    				        "reorder": false
     				   },
                                {
                                    "label": "arrival_date",
                                    "placeholder": flightdate+'1400',
                                    "inputMask":   "999999999999",
                                    "allowMultipleMasks": false,
                                    "showWordCount": false,
                                    "showCharCount": false,
                                    "tableView": true,
                                    "alwaysEnabled": false,
                                    "type": "textfield",
                                    "input": true,
                                    "key": "arrivalDate",
                                    "defaultValue": flightdate+'1400',
                                    "validate": {
                                        "customMessage": "",
                                        "json": ""
                                    },
                                    "conditional": {
                                        "show": "",
                                        "when": "",
                                        "json": ""
                                    },
                                    "widget": {
                                        "type": ""
                                    },
                                    "inputFormat": "plain",
                                    "encrypted": false,
                                    "reorder": false,
                                    "properties": {},
                                    "customConditional": "",
                                    "logic": []
                                },
                                {
                                    "label": "departure_airport",
                                    "placeholder": "HND",
									"defaultValue": "HND",
                                    "mask": false,
                                    "tableView": true,
									"required": true,
                                    "alwaysEnabled": false,
                                    "type": "select",
                                    "input": true,
                                    "key": "departureAirport",
                                    "validate": {
                                        "select": false,
                                        "customMessage": "",
                                        "json": ""
                                    },
									"validate": {
                                        "required": true,
                                        "customMessage": "Mandatory",
                                        "json": ""
                                    },
                                    "conditional": {
                                        "show": "",
                                        "when": "",
                                        "json": ""
                                    },
                                    "data": {
                                        "values": [
                                            {
                                                "label": "HND",
                                                "value": "HND"
                                            },
                                            {
                                                "label": "NRT",
                                                "value": "NRT"
                                            },
                                            {
                                                "label": "OSA",
                                                "value": "OSA"
                                            },
                                            {
                                                "label": "ITM",
                                                "value": "ITM"
                                            },
                                            {
                                                "label": "KIX",
                                                "value": "KIX"
                                            },
                                            {
                                                "label": "UKB",
                                                "value": "UKB"
                                            },
                                            {
                                                "label": "CTS",
                                                "value": "CTS"
                                            },
                                            {
                                                "label": "NGO",
                                                "value": "NGO"
                                            },
                                            {
                                                "label": "FUK",
                                                "value": "FUK"
                                            },
                                            {
                                                "label": "OKA",
                                                "value": "OKA"
                                            },
                                            {
                                                "label": "MMY",
                                                "value": "MMY"
                                            },
                                            {
                                                "label": "ISG",
                                                "value": "ISG"
                                            },
                                            {
                                                "label": "RIS",
                                                "value": "RIS"
                                            },
                                            {
                                                "label": "WKJ",
                                                "value": "WKJ"
                                            },
                                            {
                                                "label": "MBE",
                                                "value": "MBE"
                                            },
                                            {
                                                "label": "MMB",
                                                "value": "MMB"
                                            },
                                            {
                                                "label": "AKJ",
                                                "value": "AKJ"
                                            },
                                            {
                                                "label": "SHB",
                                                "value": "SHB"
                                            },
                                            {
                                                "label": "KUH",
                                                "value": "KUH"
                                            },
                                            {
                                                "label": "OBO",
                                                "value": "OBO"
                                            },
                                            {
                                                "label": "HKD",
                                                "value": "HKD"
                                            },
                                            {
                                                "label": "AOJ",
                                                "value": "AOJ"
                                            },
                                            {
                                                "label": "ONJ",
                                                "value": "ONJ"
                                            },
                                            {
                                                "label": "AXT",
                                                "value": "AXT"
                                            },
                                            {
                                                "label": "SYO",
                                                "value": "SYO"
                                            },
                                            {
                                                "label": "SDJ",
                                                "value": "SDJ"
                                            },
                                            {
                                                "label": "FKS",
                                                "value": "FKS"
                                            },
                                            {
                                                "label": "HAC",
                                                "value": "HAC"
                                            },
                                            {
                                                "label": "FSZ",
                                                "value": "FSZ"
                                            },
                                            {
                                                "label": "KIJ",
                                                "value": "KIJ"
                                            },
                                            {
                                                "label": "TOY",
                                                "value": "TOY"
                                            },
                                            {
                                                "label": "KMQ",
                                                "value": "KMQ"
                                            },
                                            {
                                                "label": "NTQ",
                                                "value": "NTQ"
                                            },
                                            {
                                                "label": "OKJ",
                                                "value": "OKJ"
                                            },
                                            {
                                                "label": "HIK",
                                                "value": "HIK"
                                            },
                                            {
                                                "label": "HIJ",
                                                "value": "HIJ"
                                            },
                                            {
                                                "label": "IWK",
                                                "value": "IWK"
                                            },
                                            {
                                                "label": "UBJ",
                                                "value": "UBJ"
                                            },
                                            {
                                                "label": "TTJ",
                                                "value": "TTJ"
                                            },
                                            {
                                                "label": "YGJ",
                                                "value": "YGJ"
                                            },
                                            {
                                                "label": "IWJ",
                                                "value": "IWJ"
                                            },
                                            {
                                                "label": "TAK",
                                                "value": "TAK"
                                            },
                                            {
                                                "label": "TKS",
                                                "value": "TKS"
                                            },
                                            {
                                                "label": "MYJ",
                                                "value": "MYJ"
                                            },
                                            {
                                                "label": "KCZ",
                                                "value": "KCZ"
                                            },
                                            {
                                                "label": "NKY",
                                                "value": "NKY"
                                            },
                                            {
                                                "label": "KKJ",
                                                "value": "KKJ"
                                            },
                                            {
                                                "label": "HSG",
                                                "value": "HSG"
                                            },
                                            {
                                                "label": "OIT",
                                                "value": "OIT"
                                            },
                                            {
                                                "label": "KMJ",
                                                "value": "KMJ"
                                            },
                                            {
                                                "label": "NGS",
                                                "value": "NGS"
                                            },
                                            {
                                                "label": "TSJ",
                                                "value": "TSJ"
                                            },
                                            {
                                                "label": "IKI",
                                                "value": "IKI"
                                            },
                                            {
                                                "label": "FUJ",
                                                "value": "FUJ"
                                            },
                                            {
                                                "label": "KMI",
                                                "value": "KMI"
                                            },
                                            {
                                                "label": "KOJ",
                                                "value": "KOJ"
                                            }
                                        ]
                                    },
                                    "valueProperty": "value",
                                    "selectThreshold": 0.3,
                                    "encrypted": false,
                                    "properties": {},
                                    "customConditional": "",
                                    "logic": [],
                                    "reorder": false,
                                    "lazyLoad": false,
                                    "selectValues": "",
                                    "disableLimit": false,
                                    "sort": "",
                                    "reference": false
                                },
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "type": "column",
                            "hideOnChildrenHidden": false,
                            "input": true,
                            "key": "column1",
                            "tableView": true,
                            "label": ""
                        },
                        {
                            "components": [
                                
                                {
                                    "label": "departure_date",
                                    "placeholder": flightdate+'1600',
                                    "inputMask":   "999999999999",
                                    "allowMultipleMasks": false,
                                    "showWordCount": false,
                                    "showCharCount": false,
                                    "tableView": true,
                                    "alwaysEnabled": false,
                                    "type": "textfield",
                                    "input": true,
                                    "key": "departureDate",
                                    "defaultValue": flightdate+'1600',
                                    "validate": {
                                        "required": true,
                                        "customMessage": "",
                                        "json": ""
                                    },
                                    "conditional": {
                                        "show": "",
                                        "when": "",
                                        "json": ""
                                    },
                                    "widget": {
                                        "type": ""
                                    },
                                    "inputFormat": "plain",
                                    "encrypted": false,
                                    "reorder": false,
                                    "properties": {},
                                    "customConditional": "",
                                    "logic": []
                                },
                                {
                                    "label": "arrival_airport",
                                    "placeholder": "ITM",
                                    "mask": false,
                                    "tableView": true,
                                    "alwaysEnabled": false,
                                    "type": "select",
                                    "input": true,
                                    "key": "arrivalAirport",
                                    "defaultValue": "ITM",
                                    "validate": {
                                        "select": false,
                                        "customMessage": "",
                                        "json": ""
                                    },
				   "validate": {
                                        "required": true,
                                        "customMessage": "Mandatory",
                                        "json": ""
                                    },
                                    "conditional": {
                                        "show": "",
                                        "when": "",
                                        "json": ""
                                    },
                                    "data": {
                                        "values": [
                                            {
                                                "label": "HND",
                                                "value": "HND"
                                            },
                                            {
                                                "label": "NRT",
                                                "value": "NRT"
                                            },
                                            {
                                                "label": "OSA",
                                                "value": "OSA"
                                            },
                                            {
                                                "label": "ITM",
                                                "value": "ITM"
                                            },
                                            {
                                                "label": "KIX",
                                                "value": "KIX"
                                            },
                                            {
                                                "label": "UKB",
                                                "value": "UKB"
                                            },
                                            {
                                                "label": "CTS",
                                                "value": "CTS"
                                            },
                                            {
                                                "label": "NGO",
                                                "value": "NGO"
                                            },
                                            {
                                                "label": "FUK",
                                                "value": "FUK"
                                            },
                                            {
                                                "label": "OKA",
                                                "value": "OKA"
                                            },
                                            {
                                                "label": "MMY",
                                                "value": "MMY"
                                            },
                                            {
                                                "label": "ISG",
                                                "value": "ISG"
                                            },
                                            {
                                                "label": "RIS",
                                                "value": "RIS"
                                            },
                                            {
                                                "label": "WKJ",
                                                "value": "WKJ"
                                            },
                                            {
                                                "label": "MBE",
                                                "value": "MBE"
                                            },
                                            {
                                                "label": "MMB",
                                                "value": "MMB"
                                            },
                                            {
                                                "label": "AKJ",
                                                "value": "AKJ"
                                            },
                                            {
                                                "label": "SHB",
                                                "value": "SHB"
                                            },
                                            {
                                                "label": "KUH",
                                                "value": "KUH"
                                            },
                                            {
                                                "label": "OBO",
                                                "value": "OBO"
                                            },
                                            {
                                                "label": "HKD",
                                                "value": "HKD"
                                            },
                                            {
                                                "label": "AOJ",
                                                "value": "AOJ"
                                            },
                                            {
                                                "label": "ONJ",
                                                "value": "ONJ"
                                            },
                                            {
                                                "label": "AXT",
                                                "value": "AXT"
                                            },
                                            {
                                                "label": "SYO",
                                                "value": "SYO"
                                            },
                                            {
                                                "label": "SDJ",
                                                "value": "SDJ"
                                            },
                                            {
                                                "label": "FKS",
                                                "value": "FKS"
                                            },
                                            {
                                                "label": "HAC",
                                                "value": "HAC"
                                            },
                                            {
                                                "label": "FSZ",
                                                "value": "FSZ"
                                            },
                                            {
                                                "label": "KIJ",
                                                "value": "KIJ"
                                            },
                                            {
                                                "label": "TOY",
                                                "value": "TOY"
                                            },
                                            {
                                                "label": "KMQ",
                                                "value": "KMQ"
                                            },
                                            {
                                                "label": "NTQ",
                                                "value": "NTQ"
                                            },
                                            {
                                                "label": "OKJ",
                                                "value": "OKJ"
                                            },
                                            {
                                                "label": "HIK",
                                                "value": "HIK"
                                            },
                                            {
                                                "label": "HIJ",
                                                "value": "HIJ"
                                            },
                                            {
                                                "label": "IWK",
                                                "value": "IWK"
                                            },
                                            {
                                                "label": "UBJ",
                                                "value": "UBJ"
                                            },
                                            {
                                                "label": "TTJ",
                                                "value": "TTJ"
                                            },
                                            {
                                                "label": "YGJ",
                                                "value": "YGJ"
                                            },
                                            {
                                                "label": "IWJ",
                                                "value": "IWJ"
                                            },
                                            {
                                                "label": "TAK",
                                                "value": "TAK"
                                            },
                                            {
                                                "label": "TKS",
                                                "value": "TKS"
                                            },
                                            {
                                                "label": "MYJ",
                                                "value": "MYJ"
                                            },
                                            {
                                                "label": "KCZ",
                                                "value": "KCZ"
                                            },
                                            {
                                                "label": "NKY",
                                                "value": "NKY"
                                            },
                                            {
                                                "label": "KKJ",
                                                "value": "KKJ"
                                            },
                                            {
                                                "label": "HSG",
                                                "value": "HSG"
                                            },
                                            {
                                                "label": "OIT",
                                                "value": "OIT"
                                            },
                                            {
                                                "label": "KMJ",
                                                "value": "KMJ"
                                            },
                                            {
                                                "label": "NGS",
                                                "value": "NGS"
                                            },
                                            {
                                                "label": "TSJ",
                                                "value": "TSJ"
                                            },
                                            {
                                                "label": "IKI",
                                                "value": "IKI"
                                            },
                                            {
                                                "label": "FUJ",
                                                "value": "FUJ"
                                            },
                                            {
                                                "label": "KMI",
                                                "value": "KMI"
                                            },
                                            {
                                                "label": "KOJ",
                                                "value": "KOJ"
                                            }
                                        ]
                                    },
                                    "valueProperty": "value",
                                    "selectThreshold": 0.3,
                                    "encrypted": false,
                                    "properties": {},
                                    "customConditional": "",
                                    "logic": [],
                                    "lazyLoad": false,
                                    "selectValues": "",
                                    "disableLimit": false,
                                    "sort": "",
                                    "reference": false,
                                    "reorder": false
                                },
                            ],
                            "width": 6,
                            "offset": 0,
                            "push": 0,
                            "pull": 0,
                            "type": "column",
                            "hideOnChildrenHidden": false,
                            "input": true,
                            "key": "column2",
                            "tableView": true,
                            "label": ""
                        }
                    ],
                    "mask": false,
                    "tableView": false,
                    "alwaysEnabled": false,
                    "type": "columns",
                    "input": false,
                    "key": "columns",
                    "conditional": {
                        "show": "",
                        "when": "",
                        "json": ""
                    },
                    "properties": {},
                    "customConditional": "",
                    "logic": [],
                    "row": "0-0",
                    "reorder": false
                },
                {
                    "label": "Travelers",
                    "disableAddingRemovingRows": false,
                    "addAnother": "",
                    "addAnotherPosition": "bottom",
                    "removePlacement": "col",
                    "defaultOpen": false,
                    "layoutFixed": false,
                    "enableRowGroups": false,
                    "multiple": true,
                    "reorder": true,
                    "mask": false,
                    "tableView": true,
                    "alwaysEnabled": false,
                    "type": "datagrid",
                    "input": true,
                    "key": "travelers",
                    "defaultValue": [
                        {
                            "fareClassCode": "VV01H",
                            "lastName": "Isherwood",
                            "unitPrice": "19000",
                            "firstName": "Donovan",
                            "frequentFlyerNumber": "FF123456789"
                        }
                    ],
                    "validate": {
                        "customMessage": "",
                        "json": ""
                    },
                    "conditional": {
                        "show": "",
                        "when": "",
                        "json": ""
                    },
                    "components": [
                        {
                            "label": " ",
                            "hideLabel": true,
                            "columns": [
                                {
                                    "components": [
                                        {
                                            "label": "fare_class_code",
                                            "placeholder": "SV28M",
                                            "allowMultipleMasks": false,
                                            "showWordCount": false,
                                            "showCharCount": false,
                                            "tableView": true,
                                            "alwaysEnabled": false,
                                            "type": "textfield",
                                            "input": true,
                                            "key": "fareClassCode",
                                            "defaultValue": "SV28M",
                                            "validate": {
                                                "required": true,
                                                "customMessage": "",
                                                "json": ""
                                            },
                                            "conditional": {
                                                "show": "",
                                                "when": "",
                                                "json": ""
                                            },
                                            "widget": {
                                                "type": ""
                                            },
                                            "inputFormat": "plain",
                                            "encrypted": false,
                                            "properties": {},
                                            "reorder": false,
                                            "customConditional": "",
                                            "logic": []
                                        },
                                        {
                                            "label": "unit_price",
                                            "placeholder": "19000",
                                            "allowMultipleMasks": false,
                                            "showWordCount": false,
                                            "showCharCount": false,
                                            "tableView": true,
                                            "alwaysEnabled": false,
                                            "type": "textfield",
                                            "input": true,
                                            "key": "unitPrice",
                                            "defaultValue": "19000",
                                            "validate": {
                                                "required": true,
                                                "customMessage": "",
                                                "json": ""
                                            },
                                            "conditional": {
                                                "show": "",
                                                "when": "",
                                                "json": ""
                                            },
                                            "widget": {
                                                "type": ""
                                            },
                                            "inputFormat": "plain",
                                            "encrypted": false,
                                            "reorder": false,
                                            "properties": {},
                                            "customConditional": "",
                                            "logic": []
                                        },
                                        {
                                            "label": "frequent_flyer_number",
                                            "placeholder": "FF123456789",
                                            "allowMultipleMasks": false,
                                            "showWordCount": false,
                                            "showCharCount": false,
                                            "tableView": true,
                                            "alwaysEnabled": false,
                                            "type": "textfield",
                                            "input": true,
                                            "key": "frequentFlyerNumber",
                                            "defaultValue": "FF123456789",
                                            "validate": {
                                                "required": false,
                                                "customMessage": "",
                                                "json": ""
                                            },
                                            "conditional": {
                                                "show": "",
                                                "when": "",
                                                "json": ""
                                            },
                                            "widget": {
                                                "type": ""
                                            },
                                            "inputFormat": "plain",
                                            "encrypted": false,
                                            "reorder": false,
                                            "properties": {},
                                            "customConditional": "",
                                            "logic": []
                                        }
                                    ],
                                    "width": 6,
                                    "offset": 0,
                                    "push": 0,
                                    "pull": 0,
                                    "type": "column",
                                    "hideOnChildrenHidden": false,
                                    "input": true,
                                    "key": "column5",
                                    "tableView": true,
                                    "label": ""
                                },
                                {
                                    "components": [
                                        {
                                            "label": "last_name",
                                            "placeholder": "Isherwood",
                                            "allowMultipleMasks": false,
                                            "showWordCount": false,
                                            "showCharCount": false,
                                            "tableView": true,
                                            "alwaysEnabled": false,
                                            "type": "textfield",
                                            "input": true,
                                            "key": "lastName",
                                            "defaultValue": "Isherwood",
                                            "validate": {
                                                "required": true,
                                                "customMessage": "",
                                                "json": ""
                                            },
                                            "conditional": {
                                                "show": "",
                                                "when": "",
                                                "json": ""
                                            },
                                            "widget": {
                                                "type": ""
                                            },
                                            "inputFormat": "plain",
                                            "encrypted": false,
                                            "reorder": false,
                                            "properties": {},
                                            "customConditional": "",
                                            "logic": []
                                        },
                                        {
                                            "label": "first_name",
                                            "placeholder": "Donovan",
                                            "allowMultipleMasks": false,
                                            "showWordCount": false,
                                            "showCharCount": false,
                                            "tableView": true,
                                            "alwaysEnabled": false,
                                            "type": "textfield",
                                            "input": true,
                                            "key": "firstName",
                                            "defaultValue": "Donovan",
                                            "validate": {
                                                "required": true,
                                                "customMessage": "",
                                                "json": ""
                                            },
                                            "conditional": {
                                                "show": "",
                                                "when": "",
                                                "json": ""
                                            },
                                            "widget": {
                                                "type": ""
                                            },
                                            "inputFormat": "plain",
                                            "encrypted": false,
                                            "reorder": false,
                                            "properties": {},
                                            "customConditional": "",
                                            "logic": []
                                        }
                                    ],
                                    "width": 6,
                                    "offset": 0,
                                    "push": 0,
                                    "pull": 0,
                                    "type": "column",
                                    "hideOnChildrenHidden": false,
                                    "input": true,
                                    "key": "column6",
                                    "tableView": true,
                                    "label": ""
                                }
                            ],
                            "mask": false,
                            "tableView": false,
                            "alwaysEnabled": false,
                            "type": "columns",
                            "input": false,
                            "key": "columns2",
                            "conditional": {
                                "show": "",
                                "when": "",
                                "json": ""
                            },
                            "reorder": false,
                            "properties": {},
                            "customConditional": "",
                            "logic": [],
                            "row": "0-0"
                        }
                    ],
                    "groupToggle": false,
                    "encrypted": false,
                    "properties": {},
                    "customConditional": "",
                    "logic": [],
                    "row": "0-1"
                }
            ],
            "groupToggle": false,
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": []
        },
        {
            "label": "last_name",
            "placeholder": "Ruiz",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "lastName",
            "defaultValue": "Ruiz",
            "validate": {
                "customMessage": "",
                "json": "",
                "required": true
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "label": "first_name",
            "placeholder": "Victor",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "firstName",
            "defaultValue": "Victor",
            "validate": {
                "customMessage": "",
                "json": "",
                "required": true
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "label": "email",
            "placeholder": "ordinary@person.com",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "email",
            "defaultValue": "ordinary@person.com",
            "validate": {
                "customMessage": "",
                "json": "",
                "required": true
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "label": "country_calling_code",
            "placeholder": "(81)",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "countryCallingCode",
            "defaultValue": "(81)",
            "validate": {
                "customMessage": "",
                "json": "",
                "required": true
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "label": "phone",
            "placeholder": "123456789012",
            "inputMask": "999999999999",
            "allowMultipleMasks": false,
            "showWordCount": false,
            "showCharCount": false,
            "tableView": true,
            "alwaysEnabled": false,
            "type": "textfield",
            "input": true,
            "key": "phone",
            "defaultValue": "123456789012",
            "validate": {
                "customMessage": "",
                "json": "",
                "required": true
            },
            "conditional": {
                "show": "",
                "when": "",
                "json": ""
            },
            "inputFormat": "plain",
            "encrypted": false,
            "properties": {},
            "customConditional": "",
            "logic": [],
            "widget": {
                "type": ""
            },
            "reorder": false
        },
        {
            "type": "button",
            "label": "Submit",
            "key": "submit",
            "disableOnInvalid": true,
            "theme": "primary",
            "input": true,
            "tableView": true
        }
    ],
    "settings": {
        "pdf": {
            "id": "1ec0f8ee-6685-5d98-a847-26f67b67d6f0",
            "src": "https://files.form.io/pdf/5692b91fd1028f01000407e3/file/1ec0f8ee-6685-5d98-a847-26f67b67d6f0"
        }
    }
}).then(form => {
    form.on('submit', (submission) => {   
    document.getElementById("demo").innerHTML =    JSON.stringify(submission, undefined, 2);

 console.log(submission);   
 mountWithData(submission.data)
  });
})
     
      }

    </script>
<pre id='demo'> </pre>
<script>
    var _sdbag = _sdbag || []
    function mountWithData(submission){
    _sdbag.push(function() {
      var widget = window.SISU({
        debug: 'true',
        page: submission.page, 
        language: 'JP', 
      })

      widget.setOrderSummary({
        booking_paid: submission.bookingPaid, 
        booking_payment_method: submission.bookingPaymentMethod, 
        booking_number: submission.bookingNumber, 
        booking_date: submission.bookingDate, 
        ana_system_date: submission.anasystemDate,
      })

      const flights = submission.flights.map(flight => ({
            flight_number: flight.flightNumber, 
            departure_airport: flight.departureAirport, 
            departure_date: flight.departureDate, 
            arrival_airport: flight.arrivalAirport,
            arrival_date: flight.arrivalDate,
            travelers: flight.travelers.map(traveler => ({
                fare_class_code: traveler.fareClassCode,
                unit_price: traveler.unitPrice, 
                last_name: traveler.lastName, 
                first_name: traveler.firstName, 
                frequent_flyer_number:
                  traveler.frequentFlyerNumber, 
            }))
          })
      )

      widget.setItems({
        flights,
      })

      widget.setCustomer({
        last_name: submission.lastName, 
        first_name: submission.firstName, 
        email:submission.email, 
        country_calling_code: submission.countryCallingCode, 
        phone: submission.phone, 
      })
      widget.on('match', data => {
          if(!data){
            const h1 = document.createElement("h1");
            h1.append("NO MATCH");
            document.getElementById('root').append(h1)
          }
        console.log(data ? 'Match!' : 'NOMATCH!', data)
      }
      )
      widget.on('success', data => console.log('Success!', data))
      widget.on('error', data => console.error('Error!', data))

      window._widget = widget

      function inject() {
        console.debug('Injecting the div')
         var div = document.createElement('div')
        div.id = 'root'
        document.body.insertBefore(div, document.body.firstChild)
       }


      inject()
      widget.mount('#root')
      document.getElementById("formio").parentNode.removeChild(document.getElementById("formio"))
    })
    }
    ;(function(ss, s) {
      ss = document.createElement('script')
      ss.type = 'text/javascript'
      ss.async = true
      ss.src = 'https://jsapi-stg.simplesurance.co.jp/bundle-ana.js'
      s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(ss, s)
    })()
  </script>

  </head>
  <body>
    <div id="formio"></div>



<script>

</script>
  </body>
</html>
